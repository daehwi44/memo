<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>英単語学習アプリ</title>
  <link rel="stylesheet" href="css/manage.css">
</head>

<body>

  <div>
    <header>
      <h1>英単語学習アプリ</h1>
    </header>

    <section id="regist_data">
      <h2>英単語の登録</h2>

      <p>問題の設定</p>
      <ul>
        <li>問題：<input type="text" id="question_1"></li>
        <li>答え：<input type="text" id="nihongo_1_1"></li>
        <li>答え：<input type="text" id="nihongo_1_2"></li>
        <li>答え：<input type="text" id="nihongo_1_3"></li>
        <li>答え：<input type="text" id="nihongo_1_4"></li>
      </ul>

      <ul>
        <li>問題：<input type="text" id="question_2"></li>
        <li>答え：<input type="text" id="nihongo_2_1"></li>
        <li>答え：<input type="text" id="nihongo_2_2"></li>
        <li>答え：<input type="text" id="nihongo_2_3"></li>
        <li>答え：<input type="text" id="nihongo_2_4"></li>
      </ul>

      <ul>
        <li>問題：<input type="text" id="question_3"></li>
        <li>答え：<input type="text" id="nihongo_3_1"></li>
        <li>答え：<input type="text" id="nihongo_3_2"></li>
        <li>答え：<input type="text" id="nihongo_3_3"></li>
        <li>答え：<input type="text" id="nihongo_3_4"></li>
      </ul>

      <ul>
        <li>問題：<input type="text" id="question_4"></li>
        <li>答え：<input type="text" id="nihongo_4_1"></li>
        <li>答え：<input type="text" id="nihongo_4_2"></li>
        <li>答え：<input type="text" id="nihongo_4_3"></li>
        <li>答え：<input type="text" id="nihongo_4_4"></li>
      </ul>

      <ul>
        <li>問題：<input type="text" id="question_5"></li>
        <li>答え：<input type="text" id="nihongo_5_1"></li>
        <li>答え：<input type="text" id="nihongo_5_2"></li>
        <li>答え：<input type="text" id="nihongo_5_3"></li>
        <li>答え：<input type="text" id="nihongo_5_4"></li>
      </ul>

      <button id="regist">登録</button>
      <button id="clear">削除</button>

    </section>

    <!--水平線-->
    <hr>

    <a href="index.html">メイン画面へ戻る</a>

  </div>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script>

<script>

  // データ登録//
  $("#regist").on("click", function () {  //もしregistをクリックしたら
    const aryQuiz = [
      {
        question: $("#question_1").val(),
        answer: [$("#nihongo_1_1").val(), $("#nihongo_1_2").val(), $("#nihongo_1_3").val(), $("#nihongo_1_4").val()]
      },
      {
        question: $("#question_2").val(),
        answer: [$("#nihongo_2_1").val(), $("#nihongo_2_2").val(), $("#nihongo_2_3").val(), $("#nihongo_2_4").val()]
      },
      {
        question: $("#question_3").val(),
        answer: [$("#nihongo_3_1").val(), $("#nihongo_3_2").val(), $("#nihongo_3_3").val(), $("#nihongo_3_4").val()]
      },
      {
        question: $("#question_4").val(),
        answer: [$("#nihongo_4_1").val(), $("#nihongo_4_2").val(), $("#nihongo_4_3").val(), $("#nihongo_4_4").val()]
      },
      {
        question: $("#question_5").val(),
        answer: [$("#nihongo_5_1").val(), $("#nihongo_5_2").val(), $("#nihongo_5_3").val(), $("#nihongo_5_4").val()]
      },
    ];
    console.log(aryQuiz);                        //console出力
    const jsonData = JSON.stringify(aryQuiz);    //変数aryQuizをJSONへ変換
    console.log(jsonData);                    //console出力
    localStorage.setItem("aryQuiz", jsonData);   //keyはaryQuiz、valueはjsonDataでローカルストレージにデータ登録

  });

  //データ削除//
  $("#clear").on("click", function () {             //もしclearをクリックしたら
    localStorage.removeItem("aryQuiz");     //aryQuizキーから登録済の文字列を削除
    $("#question_1").val("");
    $("#nihongo_1_1").val("");
    $("#nihongo_1_2").val("");
    $("#nihongo_1_3").val("");
    $("#nihongo_1_4").val("");

    $("#question_2").val("");
    $("#nihongo_2_1").val("");
    $("#nihongo_2_2").val("");
    $("#nihongo_2_3").val("");
    $("#nihongo_2_4").val("");

    $("#question_3").val("");
    $("#nihongo_3_1").val("");
    $("#nihongo_3_2").val("");
    $("#nihongo_3_3").val("");
    $("#nihongo_3_4").val("");

    $("#question_4").val("");
    $("#nihongo_4_1").val("");
    $("#nihongo_4_2").val("");
    $("#nihongo_4_3").val("");
    $("#nihongo_4_4").val("");

    $("#question_5").val("");
    $("#nihongo_5_1").val("");
    $("#nihongo_5_2").val("");
    $("#nihongo_5_3").val("");
    $("#nihongo_5_4").val("");
  });

  //データ取得//
  if (localStorage.getItem("aryQuiz")) {                  //もしaryQuizのところのデータが取得出来たら(aryQuizがnullでなかったら)
    const jsonData = localStorage.getItem("aryQuiz");     //jsonDataに"aryQuiz"keyから値を取得
    console.log(jsonData);                              //console出力
    const aryQuiz = JSON.parse(jsonData);                  //jsonから戻す処理
    console.log(aryQuiz);                                  //console出力

    $("#question_1").val(aryQuiz[0].question);
    $("#nihongo_1_1").val(aryQuiz[0].answer[0]);
    $("#nihongo_1_2").val(aryQuiz[0].answer[1]);
    $("#nihongo_1_3").val(aryQuiz[0].answer[2]);
    $("#nihongo_1_4").val(aryQuiz[0].answer[3]);

    $("#question_2").val(aryQuiz[1].question);
    $("#nihongo_2_1").val(aryQuiz[1].answer[0]);
    $("#nihongo_2_2").val(aryQuiz[1].answer[1]);
    $("#nihongo_2_3").val(aryQuiz[1].answer[2]);
    $("#nihongo_2_4").val(aryQuiz[1].answer[3]);

    $("#question_3").val(aryQuiz[2].question);
    $("#nihongo_3_1").val(aryQuiz[2].answer[0]);
    $("#nihongo_3_2").val(aryQuiz[2].answer[1]);
    $("#nihongo_3_3").val(aryQuiz[2].answer[2]);
    $("#nihongo_3_4").val(aryQuiz[2].answer[3]);

    $("#question_4").val(aryQuiz[3].question);
    $("#nihongo_4_1").val(aryQuiz[3].answer[0]);
    $("#nihongo_4_2").val(aryQuiz[3].answer[1]);
    $("#nihongo_4_3").val(aryQuiz[3].answer[2]);
    $("#nihongo_4_4").val(aryQuiz[3].answer[3]);

    $("#question_5").val(aryQuiz[4].question);
    $("#nihongo_5_1").val(aryQuiz[4].answer[0]);
    $("#nihongo_5_2").val(aryQuiz[4].answer[1]);
    $("#nihongo_5_3").val(aryQuiz[4].answer[2]);
    $("#nihongo_5_4").val(aryQuiz[4].answer[3]);

  }

</script>

</html>